# UI Redesign: Three-section layout with light/dark theme

**Date:** 2026-02-17 18:30
**Task:** Reorganize prompt tester into three uniform sections (Inputs, Prompts, Models), add light theme support, remove test type switch and score thresholds.

## Goal
A clean prompt tester with three sections that share the same list-based layout pattern. Each section has a sidebar list (add/rename/remove items) and a content area. The app respects the user's system theme preference (light or dark).

## Input Information
- Current app has: Posts section (different layout from prompts), Prompt Variants section, Model selection (toggle buttons), test type switch (scorer/commenter), score thresholds
- CSS already has both `:root` (light) and `.dark` theme variables defined in globals.css
- Layout hardcodes `className="dark"` and uses `dark` Clerk theme
- The PromptList component already implements the desired list pattern: sidebar with items, add button, double-click to rename, × to remove
- User wants all three sections to use this same PromptList-style layout

## Approach

### Step-by-step plan

1. **Light/dark theme auto-detection**
   - Remove hardcoded `className="dark"` from `<html>` in layout.tsx
   - Use `@media (prefers-color-scheme: dark)` in CSS to apply dark vars automatically instead of `.dark` class
   - Update Clerk theme to be dynamic (use dark theme only when system is dark)

2. **Remove test type switch**
   - Remove `testType` state and all scorer/commenter branching
   - Remove threshold states (like, comment, share, save)
   - Remove temperature slider
   - Simplify the API call — just send prompt + input + model, get raw output back

3. **Convert Posts → Inputs section**
   - Replace the posts array with an inputs array using the same pattern as PromptList
   - Each input has: id, name (default "Input 1", "Input 2"), content
   - Sidebar list of inputs (same PromptList component, generalized)
   - Content area: textarea for the active input's content

4. **Keep Prompts section as-is**
   - Already has the right layout (PromptList sidebar + textarea)
   - Update default naming from "v1 Default" to "Prompt 1"

5. **Convert Models section to list layout**
   - Replace toggle buttons with the same list component
   - Each model has: id, name (display name), modelId (the actual OpenRouter model ID)
   - Sidebar list of models
   - Content area: model ID input + any model-specific config
   - Keep the OpenRouter model search/add functionality
   - Default models pre-populated

6. **Generalize PromptList → ItemList**
   - Extract the PromptList component into a generic `ItemList` that works for all three sections
   - Props: items (id, name), activeId, onSelect, onAdd, onRemove, onRename

7. **Update results section**
   - Remove scorer-specific result display (score badges, actions)
   - Show raw model output for each input × prompt × model combination
   - Keep token counts

### Key decisions
- **System theme via CSS media query**: Use `@media (prefers-color-scheme: dark)` rather than JS-based theme detection. Simpler, no flash of wrong theme.
  - Alternative: next-themes package — rejected, adds dependency for something CSS handles natively
- **Generalized ItemList component**: Single reusable component for all three sections rather than three separate components.

## Files to Modify
- `apps/web/src/app/globals.css` — Change `.dark` to `@media (prefers-color-scheme: dark)`
- `apps/web/src/app/layout.tsx` — Remove hardcoded dark class, make Clerk theme dynamic
- `apps/web/src/app/page.tsx` — Major rewrite: three-section layout, remove test type/thresholds
